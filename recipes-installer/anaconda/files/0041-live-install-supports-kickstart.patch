From 1699551539bf0de44edf0a8ea7af95c9056806e9 Mon Sep 17 00:00:00 2001
From: Hongxu Jia <hongxu.jia@windriver.com>
Date: Wed, 25 Jul 2018 10:20:08 +0800
Subject: [PATCH] live install supports kickstart

While live install, WRLinux does not support harddrive,
use cdrom to replace

Upstream-Status: Inappropriate [oe specific]

Signed-off-by: Hongxu Jia <hongxu.jia@windriver.com>

Update patch context for anaconda 32.

Signed-off-by: Kai Kang <kai.kang@windriver.com>

---
 pyanaconda/installation.py | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/pyanaconda/installation.py b/pyanaconda/installation.py
index 2cb222ab6..d8ea49ea6 100644
--- a/pyanaconda/installation.py
+++ b/pyanaconda/installation.py
@@ -65,6 +65,10 @@ class WriteResolvConfTask(Task):
 def _writeKS(ksdata):
     path = conf.target.system_root + "/root/anaconda-ks.cfg"
 
+    # Correct method of live install, use cdrom to replace
+    if ksdata.method.method == "harddrive":
+        ksdata.method.method = "cdrom"
+
     # Make it so only root can read - could have passwords
     with util.open_with_perm(path, "w", 0o600) as f:
         f.write("# Generated by Anaconda {}\n".format(util.get_anaconda_version_string()))
